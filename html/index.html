<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />




    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Diacritícál by Chad Jones</title>
    <style>
      h2 {margin-top:1em;}
      #example_button {padding: 1em !important; font-size: 22pt; font-family: arial; height: 2em;}

      mark.term {background: none; border: 1px solid silver; border-radius:3px;}
      mark.term.correction {text-shadow: 0px 0px .3em rgba(255,230,0,.5); }
      mark.term.misspelled {text-decoration: line-through; border: 0;}
      mark.term.unknown  {text-shadow: 0px 0px .3em rgba(100,149,237,.8);}
      div.legend {font-size: 9.5pt; margin: .5em; padding:.5em; float:right; line-height: 1.5em; border: 1px dashed gray;}

      .accents-report {width: 80%; border: 1px dashed silver;
        line-height: 1em; font-size: 14pt; margin: 1em; padding: .75em;
      }
      .accents-report h4 {margin: 5px; padding: 0; }
      .accents-modified {border: 2px solid gray; margin: 1em; padding: 1em;}
      div.corrected_text {border: 1px dashed silver; margin: 1em; padding: 1em; padding-left:3em;
        background-color: rgba(255,255,255,0.6);}


    </style>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Diacritícál</h1>
        <h2>Bahá’í Term Suggestion Script</h2>
        <a href="https://github.com/chadananda/diacritical" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">


<!-- ==================================== -->



<h2>The Big Idea:</h2>

<p>Formatting Bahá’í electronic texts is a pain. Even the best quality electronic texts from the BWC contain thousands of errors. And by far the most common type of error is the darned diacritcals on all those transliterated Arabic and Persian terms.</p>

<p>This project attempts to address that fundamental problem by providing an automated replacement and suggestion system which can utilize a dictionary of authoritatively spelled terms.  </p>








<!-- ==================================== -->
<h2>Generate a Suggestion Report for your own Text: </h2>

<p> An implementation of the script which pulls down the current wordlist. You can run entire books through this little example.
<a href="http://chadananda.github.io/diacritical/html/report.html">http://chadananda.github.io/diacritical/html/report.html</a>


<!-- ==================================== -->
<h2>Get Involved, help me Build the Dictionary!</h2>

<p>The project to actually gather that massive correct dictionary is over here:  <a href="https://github.com/chadananda/accents">https://github.com/chadananda/accents</a></p>

<p>To get involved, simply contact me at <a href="mailto:chadananda@gmail.com">chadananda@gmail.com</a>. I'll set up user credentials for for the "accents" app, assign you a book and answer any questions.   </p>

<p>Want to use the latest dictionary? This REST URL pulls down a JSON object containing the entire current wordlist, grouped by occurance with count.  <a href="http://diacritics.iriscouch.com/accents/_design/terms_list/_view/terms_list?group=true&amp;group_level=1">http://diacritics.iriscouch.com/accents/_design/terms_list/_view/terms_list?group=true&amp;group_level=1</a></p>



<!-- ==================================== -->
<h2>Using the Library in your own Project</h2>

<p>After adding diacritical.js to a web page simply provide a dictionary of UTF-8 terms as a Javascript array. For example:</p>

<div class="highlight highlight-Javascript"><pre><span class="kd">var</span> <span class="nx">diacrital</span> <span class="o">=</span> <span class="nx">New</span> <span class="nx">Diacritical</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">dictionary</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'Abu’l-Faḍl'</span><span class="p">,</span>
    <span class="s1">'Aḥmad'</span><span class="p">,</span>
    <span class="s1">'Aḥmad'</span><span class="p">,</span>
    <span class="s1">'Aḥmad'</span><span class="p">,</span>
    <span class="s1">'Ahmad'</span><span class="p">,</span>
    <span class="s1">'aḥmad'</span><span class="p">,</span>
    <span class="s1">'Aḥsanu’l-Qiṣaṣ'</span><span class="p">,</span>
    <span class="s1">'Ba_ghdád'</span><span class="p">,</span>
    <span class="s1">'Baqí‘'</span><span class="p">,</span>
    <span class="s1">'Báqir-i-Ra_shtí'</span><span class="p">,</span>
    <span class="s1">'Dalílu’l-Mutaḥayyirín'</span><span class="p">,</span>
    <span class="s1">'Fatḥ-‘Alí'</span><span class="p">,</span>
<span class="p">];</span>
<span class="kd">var</span> <span class="nx">bad_text</span> <span class="o">=</span> <span class="s2">"This is some sample text with bad diacriticals: Ahmad, Baghdad, "</span><span class="o">+</span>
  <span class="s2">"Fath-Ali and Baqi. Notice that the dictionary uses _sh to indicate an "</span><span class="o">+</span>
  <span class="s2">"underscore. Also, notice that the dictionary is case sensitive but the "</span><span class="o">+</span>
  <span class="s2">"replacement system is still smart enough to deal with  ALLCAP words like AHMAD. "</span><span class="o">+</span>
  <span class="s2">"Moreover, the dictionary ideally should have multiple versions of each word in "</span><span class="o">+</span>
  <span class="s2">"order to help weed out misspellings. (Notice one of the spellings of Ahmad is "</span><span class="o">+</span>
  <span class="s2">"wrong in the dictionary but the word is still corrected correctly.)"</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">fixed_text</span> <span class="o">=</span> <span class="nx">diacritical</span><span class="p">.</span><span class="nx">replaceText</span><span class="p">(</span><span class="nx">bad_text</span><span class="p">,</span> <span class="nx">dictionary</span><span class="p">);</span>
</pre></div>



<h2>See it in action here: </h2>


<div id="example_corrected">
  <input id="example_button" type="button" style="" value="Click here to see the bad text above corrected." />
  <br><br><br><br><br><br>
</div><br><br>

<!-- ==================================== -->
<h2>Test Harness: </h2>
<p> About 20 tests written in Jasmine to test all kinds of weird text-parsing scenarios:
<a href="http://chadananda.github.io/diacritical/tests">http://chadananda.github.io/diacritical/tests</a></p>



        </section>

        <aside id="sidebar">
          <a href="https://github.com/chadananda/diacritical/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/chadananda/diacritical/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/chadananda/diacritical"></a> is maintained by <a href="https://github.com/chadananda">chadananda</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>


  </body>


  <script src="//code.jquery.com/jquery-2.1.0.min.js"></script>
  <script src="../diacritical.js"></script>
  <script type="text/javascript">
    // ok, just a little test bed for HTML conversion
    $(function(){ $('#example_button').click(function(){

      var diacritical = new Diacritical();

      var dictionary = [
          'Abu’l-Faḍl',
          'Aḥmad',
          'Aḥmad',
          'Aḥmad',
          'Ahmad',
          'aḥmad',
          'Aḥsanu’l-Qiṣaṣ',
          'Ba_ghdád',
          'Baqí‘',
          'Báqir-i-Ra_shtí',
          'Dalílu’l-Mutaḥayyirín',
          'Fatḥ-‘Alí',
      ];
      var bad_text = "This is some sample text with bad diacriticals: Ahmad, Baghdad, "+
        "Fath-Ali and Baqi. Notice that the dictionary uses _sh to indicate an "+
        "underscore. Also, notice that the dictionary is case sensitive but the "+
        "replacement system is still smart enough to deal with ALLCAP words like AHMAD. "+
        "Moreover, the dictionary ideally should have multiple versions of each word in "+
        "order to help weed out misspellings. (Notice one of the spellings of Ahmad is "+
        "wrong in the dictionary but the word is still corrected correctly.)";

      // simple auto correct
      var fixed_text = diacritical.replaceText(bad_text, dictionary);

      // correct showing all errors and returning report object
      var report = {}; // must pass in an object to get a report back
      var fixed_text_showing_all = diacritical.replaceText(bad_text, dictionary, 'showall', report);


      var html = "<div class='corrected_text'> "+
        "<div> <h3>Showing Corrections:</h3> "+
        "<div class='legend'> "+
        "<mark class='term correct'>Correct Term</mark> <br>"+
        "<mark class='term misspelled'>Misspelled</mark> <br>"+
        "<mark class='term correction'>Suggestion</mark> <br>"+
        "<mark class='term unknown'>Unknown Term</mark> </div>"+
        "" + fixed_text_showing_all + "</div>" +
        "<div> <h3>Automated Correction Mode:</h3> "+
        "" + fixed_text + "</div>  "+
        " <h3>JSON Report:</h3> <pre class='report'>" + JSON.stringify(report, undefined, 2) + "</pre> "+
        "</div>";

      $('#example_corrected').html(html);


    }) });



    </script>
</html>
